
Now, you can deploy a cluster or run a benchmark by using cnp-bench.

To deploy an example cluster run:

kubectl apply -f - <<EOF
---
apiVersion: postgresql.k8s.enterprisedb.io/v1
kind: Cluster
metadata:
  name: {{ .Release.Name }}
spec:
  instances: 3

  storage:
    size: 1Gi

{{- if not (index .Values "cloud-native-postgresql" "enabled") }}
  monitoring:
    customQueriesConfigMap:
      - name: default-monitoring-queries
        key: custom-queries
{{- end }}
EOF

Instead, to run a benchmark see cnp-bench project instructions found at: https://github.com/EnterpriseDB/cnp-bench

To see the dedicated Grafana dashboard ("Cloud Native Postgresql") run the following command:

kubectl port-forward svc/{{.Release.Name}}-grafana 3000:80

And then visit the following url:

http://localhost:3000

Login using the following credentials:

username: "admin"
password: "{{ index .Values "kube-prometheus-stack" "grafana" "adminPassword" }}"
