
Now, you can deploy a cluster as follows:

kubectl apply -f - <<EOF
---
apiVersion: postgresql.k8s.enterprisedb.io/v1
kind: Cluster
metadata:
  name: {{ .Release.Name }}
spec:
  instances: 3

  storage:
    size: 1Gi

{{- if not (index .Values "cloud-native-postgresql" "enabled") }}
  monitoring:
    customQueriesConfigMap:
      - name: default-monitoring-queries
        key: custom-queries
{{- end }}
EOF

Or, run a benchmark from cnp-bench (see https://github.com/EnterpriseDB/cnp-bench).

Then, you can see the dedicated Grafana dashboard by running the following command:

kubectl port-forward svc/{{.Release.Name}}-grafana 3000:80

Accessing the "Cloud Native Postgresql" dashboard at:

http://localhost:3000

Using the following credentials:

username: "admin"
password: "{{ index .Values "kube-prometheus-stack" "grafana" "adminPassword" }}"
