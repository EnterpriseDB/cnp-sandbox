You can now deploy a cluster as follows:

kubectl apply -f - <<EOF
---
apiVersion: postgresql.k8s.enterprisedb.io/v1
kind: Cluster
metadata:
  name: {{ .Release.Name }}
spec:
  instances: 3

  storage:
    size: 1Gi

  monitoring:
    customQueriesConfigMap:
      - name: {{ .Release.Name }}-monitoring-queries
        key: custom-queries
EOF

And access Grafana with the following credentials:

username: "admin"
password: "{{ index .Values "kube-prometheus-stack" "grafana" "adminPassword" }}"

By executing the following command:

kubectl port-forward svc/{{.Release.Name}}-grafana 3000:80

and going to:

http://localhost:3000
